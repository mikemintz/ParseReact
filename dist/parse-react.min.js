/*
 *  Parse + React
 *  v0.2.4
 *
 *  Copyright (c) 2015, Parse, LLC. All rights reserved.
 *
 *  You are hereby granted a non-exclusive, worldwide, royalty-free license to
 *  use, copy, modify, and distribute this software in source code or binary
 *  form for use in connection with the web services and APIs provided by Parse.
 *
 *  As with any software that integrates with the Parse platform, your use of
 *  this software is subject to the Parse Terms of Service
 *  [https://www.parse.com/about/terms]. This copyright notice shall be
 *  included in all copies or substantial portions of the software.
 *
 *  THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 *  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 *  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 *  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 *  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 *  FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 *  IN THE SOFTWARE.
 *
 */
!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.ParseReact=e()}}(function(){return function e(t,r,n){function i(a,o){if(!r[a]){if(!t[a]){var u="function"==typeof require&&require;if(!o&&u)return u(a,!0);if(s)return s(a,!0);var c=new Error("Cannot find module '"+a+"'");throw c.code="MODULE_NOT_FOUND",c}var f=r[a]={exports:{}};t[a][0].call(f.exports,function(e){var r=t[a][1][e];return i(r?r:e)},f,f.exports,e,t,r,n)}return r[a].exports}for(var s="function"==typeof require&&require,a=0;a<n.length;a++)i(n[a]);return i}({1:[function(e,t){"use strict";var r=e("./LocalSubscriptions"),n=e("./ParsePatches");n.applyPatches(),t.exports={currentUser:r.currentUser,Mixin:e("./Mixin"),Mutation:e("./Mutation")}},{"./LocalSubscriptions":5,"./Mixin":6,"./Mutation":7,"./ParsePatches":10}],2:[function(){},{}],3:[function(e,t){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=e("./Id"),s=function(){function e(t,n,s){if(r(this,e),!(t instanceof i))throw new TypeError("Cannot create a Delta with an invalid target Id");if(this.id=t,s&&s.destroy)this.map={},this.destroy=!0;else{this.map={};for(var a in n)"objectId"!==a&&(this.map[a]=n[a])}}return n(e,[{key:"merge",value:function(t){if(!(t instanceof e))throw new TypeError("Only Deltas can be merged");if(this.id.toString()!==t.id.toString())throw new Error("Only Deltas for the same Object can be merged");if(t.destroy&&(this.map={},this.destroy=!0),!this.destroy){for(var r in t.map)this.map[r]=t.map[r];return this}}}]),e}();t.exports=s},{"./Id":4}],4:[function(e,t){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=function(){function e(t,n){r(this,e),this.className=t,this.objectId=n}return n(e,[{key:"toString",value:function(){return this.className+":"+this.objectId}}],[{key:"fromString",value:function(t){var r=t.split(":");if(2!==r.length)throw new TypeError("Cannot create Id object from this string");return new e(r[0],r[1])}}]),e}();t.exports=i},{}],5:[function(e,t){"use strict";var r=e("./flatten"),n=e("./Id"),i=e("./ObjectStore"),s=e("./StubParse"),a={subscribers:{},observerCount:0,subscribe:function(e){var t=this,a="o"+this.observerCount++;this.subscribers[a]=e;var o;return s.User.current()?(o=new n("_User",s.User.current().id),i.getLatest(o)||i.storeObject(r(s.User.current())),e.onNext(i.getLatest(o))):s.Storage.async&&(s.User._currentAsync().then(function(t){null!==t&&(o=new n("_User",t.id),i.getLatest(o)||i.storeObject(r(t)),e.onNext(i.getLatest(o)))}),e.onNext(null)),{dispose:function(){delete t.subscribers[a]}}},update:function(e){var t=s.User.current();if(null!==t){for(var a in e)"id"!==a&&"objectId"!==a&&"className"!==a&&"sessionToken"!==a&&"createdAt"!==a&&"updatedAt"!==a&&t.set(a,e[a]);s.User._saveCurrentUser(t)}for(var o in this.subscribers){var u=null;t&&(u=i.getLatest(new n("_User",t.id)),null===u&&(u=r(t),i.storeObject(u))),this.subscribers[o].onNext(u)}}},o={currentUser:a};t.exports=o},{"./Id":4,"./ObjectStore":9,"./StubParse":12,"./flatten":17}],6:[function(e,t){"use strict";var r=e("./StubParse"),n=e("./warning"),i={componentWillMount:function(){if(this._subscriptions={},this.data=this.data||{},this._pendingQueries={},this._queryErrors={},!this.observe)throw new Error("Components using ParseReact.Mixin must declare an observe() method.");this._subscribe(this.props,this.state)},componentWillUnmount:function(){this._unsubscribe()},componentWillUpdate:function(e,t){(e!==this.props||t!==this.state)&&this._subscribe(e,t)},pendingQueries:function(){var e=[];for(var t in this._subscriptions)this._subscriptions[t].pending&&this._subscriptions[t].pending()&&e.push(t);return e},queryErrors:function(){if(Object.keys(this._queryErrors).length<1)return null;var e={};for(var t in this._queryErrors)e[t]=this._queryErrors[t];return e},refreshQueries:function(e){var t,r={};if("undefined"==typeof e)for(t in this._subscriptions)r[t]=this._subscriptions[t];else if("string"==typeof e)this._subscriptions[e]?r[e]=this._subscriptions[e]:n("Cannot refresh unknown query name: "+e);else{if(!Array.isArray(e))throw new TypeError("refreshQueries must receive a query name or an array of query names");for(var i=0;i<e.length;i++)this._subscriptions[e[i]]?r[e[i]]=this._subscriptions[e[i]]:n("Cannot refresh unknown query name: "+e[i])}for(t in r)this._pendingQueries[t]=!0,r[t].refresh();this.forceUpdate()},_subscribe:function(e,t){var i=this.observe(e,t),s={};for(var a in i)i[a].subscribe?(s[a]=i[a].subscribe({onNext:this._receiveData.bind(this,a),onError:i[a]instanceof r.Query?this._receiveError.bind(this,a):function(){}}),this._pendingQueries[a]=!0):n('The observation value "'+a+'" is not subscribable. Make sure you are returning the Query, and not fetching it yourself.');this._unsubscribe(),this._subscriptions=s},_unsubscribe:function(){for(var e in this._subscriptions)this._subscriptions[e].dispose();this._subscriptions={}},_receiveData:function(e,t){this.data[e]=t,delete this._pendingQueries[e],delete this._queryErrors[e],this.forceUpdate()},_receiveError:function(e,t){this._queryErrors[e]=t,this.forceUpdate()}};t.exports=i},{"./StubParse":12,"./warning":18}],7:[function(e,t){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e){if(e instanceof u)return e;if(e.className&&e.objectId)return new u(e.className,e.objectId);throw new TypeError("Argument must be a plain Parse Object with a className and objectId")}function i(e){if(!e||"string"!=typeof e||"objectId"===e||"createdAt"===e||"updatedAt"===e)throw new TypeError("Invalid column name for mutation: "+e)}function s(e){e.hasOwnProperty("objectId")&&(l("Ignoring reserved field: objectId"),delete e.objectId),e.hasOwnProperty("className")&&(l("Ignoring reserved field: className"),delete e.className),e.hasOwnProperty("createdAt")&&(l("Ignoring reserved field: createdAt"),delete e.createdAt),e.hasOwnProperty("updatedAt")&&(l("Ignoring reserved field: updatedAt"),delete e.updatedAt)}var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=e("./Delta"),u=e("./Id"),c=e("./StubParse"),f=e("./UpdateChannel"),l=e("./warning"),d=function(){function e(t,n,i){r(this,e),this.action=t,this.target=n,this.data=i}return a(e,[{key:"dispatch",value:function(e){return"NOOP"===this.action?c.Promise.as({}):f.issueMutation(this,e||{})}},{key:"applyTo",value:function(e){var t=this;switch(this.action){case"SET":for(var r in this.data)e[r]=this.data[r];break;case"UNSET":delete e[this.data];break;case"INCREMENT":isNaN(e[this.data.column])?e[this.data.column]=this.data.delta:e[this.data.column]+=this.data.delta;break;case"ADD":e[this.data.column]=Array.isArray(e[this.data.column])?e[this.data.column].concat(this.data.value):this.data.value.concat([]);break;case"ADDUNIQUE":Array.isArray(e[this.data.column])?this.data.value.map(function(r){e[t.data.column].indexOf(r)<0&&e[t.data.column].push(r)}):e[this.data.column]=this.data.value.concat([]);break;case"REMOVE":if(!Array.isArray(e[this.data.column])||e[this.data.column].length<1)break;this.data.value.map(function(r){var n=e[t.data.column].indexOf(r);n>-1&&e[t.data.column].splice(n,1)})}}},{key:"generateDelta",value:function(e){if("DESTROY"===this.action&&this.target instanceof u)return new o(this.target,{},{destroy:!0});var t={};"UNSET"===this.action&&(t[this.data]={unset:!0});var r,n;if(n=this.target instanceof u?this.target:new u(this.target,e.objectId),"CREATE"===this.action||"SET"===this.action)for(r in this.data)t[r]={set:this.data[r]};for(r in e)"objectId"!==r&&(t[r]={set:e[r]}),"createdAt"===r&&(t.updatedAt={set:new Date(e.createdAt)});return new o(n,t)}}]),e}();t.exports={Mutation:d,Create:function(e,t){return t=t||{},s(t),new d("CREATE",e,t)},Destroy:function(e){return new d("DESTROY",n(e),null)},Set:function(e,t){return t&&Object.keys(t).length?(s(t),new d("SET",n(e),t)):(l("Performing a Set mutation with no changes: dispatching thiswill do nothing."),new d("NOOP","",{}))},Unset:function(e,t){return i(t),new d("UNSET",n(e),t)},Increment:function(e,t,r){if(i(t),"undefined"!=typeof r&&isNaN(r))throw new TypeError("Cannot increment by a non-numeric amount");var s={column:t,delta:"undefined"==typeof r?1:r};return new d("INCREMENT",n(e),s)},Add:function(e,t,r){i(t);var s={column:t,value:Array.isArray(r)?r:[r]};return new d("ADD",n(e),s)},AddUnique:function(e,t,r){i(t);var s={column:t,value:Array.isArray(r)?r:[r]};return new d("ADDUNIQUE",n(e),s)},Remove:function(e,t,r){i(t);var s={column:t,value:Array.isArray(r)?r:[r]};return new d("REMOVE",n(e),s)},AddRelation:function(e,t,r){i(t);var s=Array.isArray(r)?r:[r],a={column:t,targets:s.map(n)};return new d("ADDRELATION",n(e),a)},RemoveRelation:function(e,t,r){i(t);var s=Array.isArray(r)?r:[r],a={column:t,targets:s.map(n)};return new d("REMOVERELATION",n(e),a)}}},{"./Delta":3,"./Id":4,"./StubParse":12,"./UpdateChannel":15,"./warning":18}],8:[function(e,t){(function(r){"use strict";function n(e,t){if(t||(t=[]),t.indexOf(e)>-1)throw new Error("Tried to encode circular reference");if(Array.isArray(e))return t=t.concat([e]),e.map(function(e){return n(e,t)});if("[object Date]"===u.call(e))return{__type:"Date",iso:e.toJSON()};if(e instanceof a||e instanceof o.Object){var r=e instanceof a?e.objectId:e.id;if("undefined"==typeof r)throw new Error("Tried to save a pointer to an unsaved Parse Object");return{__type:"Pointer",className:e.className,objectId:r}}if(e instanceof o.GeoPoint)return e.toJSON();if(e instanceof o.File){if(!e.url())throw new Error("Tried to save a reference to an unsaved file");return{__type:"File",name:e.name(),url:e.url()}}if("object"==typeof e){if(e.objectId&&e.className)return{__type:"Pointer",className:e.className,objectId:e.objectId};t=t.concat(e);var i={};for(var s in e)i[s]=n(e[s],t);return i}return e}function i(e){return o._request(e).then(function(e){return e.createdAt&&(e.createdAt=new Date(e.createdAt)),e.updatedAt&&(e.updatedAt=new Date(e.updatedAt)),o.Promise.as(e)})}function s(e,t,r){var s,a="string"==typeof t?t:t.className,o="string"==typeof t?"":t.objectId;switch(e){case"CREATE":return i({method:"POST",route:"classes",className:a,data:n(r)});case"DESTROY":return i({method:"DELETE",route:"classes",className:a,objectId:o});case"SET":return i({method:"PUT",route:"classes",className:a,objectId:o,data:n(r)});case"UNSET":return s={},s[r]={__op:"Delete"},i({method:"PUT",route:"classes",className:a,objectId:o,data:s});case"INCREMENT":return s={},s[r.column]={__op:"Increment",amount:r.delta},i({method:"PUT",route:"classes",className:a,objectId:o,data:s});case"ADD":return s={},s[r.column]={__op:"Add",objects:n(r.value)},i({method:"PUT",route:"classes",className:a,objectId:o,data:s});case"ADDUNIQUE":return s={},s[r.column]={__op:"AddUnique",objects:n(r.value)},i({method:"PUT",route:"classes",className:a,objectId:o,data:s});case"REMOVE":return s={},s[r.column]={__op:"Remove",objects:n(r.value)},i({method:"PUT",route:"classes",className:a,objectId:o,data:s});case"ADDRELATION":return s={},s[r.column]={__op:"AddRelation",objects:n(r.targets)},i({method:"PUT",route:"classes",className:a,objectId:o,data:s});case"REMOVERELATION":return s={},s[r.column]={__op:"RemoveRelation",objects:n(r.targets)},i({method:"PUT",route:"classes",className:a,objectId:o,data:s})}throw new TypeError("Invalid Mutation action: "+e)}var a=e("./Id"),o=e("./StubParse"),u=Object.prototype.toString,c={execute:s};t.exports=c}).call(this,e("_process"))},{"./Id":4,"./StubParse":12,_process:2}],9:[function(e,t){(function(r){"use strict";function n(e){if(!(e.id instanceof y))throw new Error("Cannot store an object without an Id");var t={};return m[e.id]&&(t=m[e.id].queries),m[e.id]={data:e,queries:t},e.id}function i(e){if(!(e instanceof y))throw new TypeError("Argument must be a valid object Id");if(!m[e])return[];var t=Object.keys(m[e].queries);return delete m[e],t}function s(e,t){if(m[e])m[e].queries[t]=!0;else if(w[e])w[e][t]=!0;else{var r={};r[t]=!0,w[e]=r}}function a(e,t){m[e]?delete m[e].queries[t]:w[e]&&(delete w[e][t],Object.keys(w[e]).length<1&&delete w[e])}function o(e){return m[e]?Object.keys(m[e].queries):w[e]?Object.keys(w[e]):[]}function u(e,t,r){var n=_++,i={payloadId:n,date:r||new Date,mutation:t};return j[e]?j[e].push(i):j[e]=[i],n}function c(e){j[e]=[]}function f(e,t,r){var n,i=j[e];for(n=0;n<i.length;n++)if(i[n].payloadId===t){delete i[n].mutation,i[n].delta=r;break}if(n>=i.length)throw new Error("Optimistic Mutation completed, but was not found in the pending stack.");var s=Object.keys(r.map);if(n+1<i.length){var a=i[n+1].delta;"undefined"!=typeof a&&(r.merge(a),i.splice(n+1,1))}if(n>0){var o=i[n-1].delta;"undefined"!=typeof o&&(o.merge(r),i.splice(n,1))}var u=i[0].delta;if(u){i.shift();var c=l(u);return c.id=e,c}return{id:e,latest:p(r.id),fields:s}}function l(e){var t=e.id;if(e.destroy&&m[t])return delete m[t],{id:t,latest:null};var r,n={},i=m[t]&&m[t].data,s=[];if(i)for(r in i)n[r]=i[r];else n.id=t,n.objectId=t.objectId,n.className=t.className,s.push("objectId");for(r in e.map){s.push(r);var a=e.map[r];a.hasOwnProperty("unset")?delete n[r]:a.hasOwnProperty("set")&&(n[r]=a.set)}return i?m[t].data=n:m[t]={data:n,queries:{}},{id:t,latest:n,fields:s}}function d(e,t){var r=g(t);Array.isArray(e)||(e=[e]);var i,a;if(t._order)for(a={},i=0;i<t._order.length;i++){var o=t._order[i];"-"===o[0]&&(o=o.substring(1)),a[o]=!0}var u=[];if(t._include.length)for(i=0;i<t._include.length;i++)u.push(t._include[i].split("."));var c=[];for(i=0;i<e.length;i++){var f=v(e[i]),l=n(f);if(u.length)for(var d=0;d<u.length;d++)for(var h=u[d],b=e[i],p=0;b&&p<h.length;p++)b=b.get(h[p]),b&&n(v(b));var y=l;if(a){var m={};for(var w in a)m[w]=f[w];y={id:l,ordering:m}}c.push(y),s(f.id,r)}return c}function h(e){Array.isArray(e)||(e=[e]);for(var t=[],r=0;r<e.length;r++){var n=p(e[r]),i={};for(var s in n)i[s]=n[s];Object.freeze(i),t.push(i)}return t}function b(e,t){if(!m[e])return null;"undefined"==typeof t&&(t=[e.toString()]);var r=m[e].data,n={};for(var i in r){var s=r[i];if(null!==s&&"object"==typeof s&&"Pointer"===s.__type){var a=new y(s.className,s.objectId);t.indexOf(a.toString())<0&&m[a]&&(t=t.concat([a.toString()]),s=b(a,t))}n[i]=s}return n}function p(e){if(j[e]&&j[e].length>0){var t,r,n={};if("CREATE"===j[e][0].mutation.action){t=j[e][0].mutation;var i=t.data;for(r in i)n[r]=i[r];var s=t.target instanceof y?t.target.className:t.target;return n.id=e instanceof y?e:new y(s,e),n.className=s,n.createdAt=n.updatedAt=j[e][0].date,n}if(m[e]){var a=b(e);for(r in a)n[r]=a[r]}for(var o=0;o<j[e].length;o++){if(t=j[e][o].mutation,"DESTROY"===t.action)return null;t.applyTo(n),n.updatedAt=j[e][o].date}return n}return m[e]?b(e):null}var v=e("./flatten"),y=e("./Id"),g=e("./QueryTools").queryHash,m={},w={},j={},_=0,O={storeObject:n,removeObject:i,addSubscriber:s,removeSubscriber:a,fetchSubscribers:o,stackMutation:u,destroyMutationStack:c,resolveMutation:f,commitDelta:l,storeQueryResults:d,getDataForIds:h,deepFetch:b,getLatest:p};t.exports=O}).call(this,e("_process"))},{"./Id":4,"./QueryTools":11,"./flatten":17,_process:2}],10:[function(e,t){"use strict";var r=e("./flatten"),n=e("./LocalSubscriptions"),i=e("./StubParse"),s=e("./SubscriptionManager"),a=i.User.prototype.signUp,o=i.User.prototype.logIn,u=i.User.prototype._linkWith,c=i.User.logOut,f={toPlainObject:function(){return r(this)},subscribe:function(e){return s.subscribeToQuery(this,e)},signUp:function(e,t){return a.call(this,e,t).then(function(){n.currentUser.update()})},logIn:function(e){return o.call(this,e).then(function(){n.currentUser.update()})},_linkWith:function(e,t){return u.call(this,e,t).then(function(){n.currentUser.update()})},logOut:function(){var e=c();return n.currentUser.update(),e}},l={applyPatches:function(){i.Object.prototype.toPlainObject||(i.Object.prototype.toPlainObject=f.toPlainObject),i.Query.prototype.subscribe||(i.Query.prototype.subscribe=f.subscribe),i.User.prototype.signUp=f.signUp,i.User.prototype.logIn=f.logIn,i.User.prototype._linkWith=f._linkWith,i.User.logOut=f.logOut}};t.exports=l},{"./LocalSubscriptions":5,"./StubParse":12,"./SubscriptionManager":14,"./flatten":17}],11:[function(e,t){"use strict";function r(e){if(!e.hasOwnProperty("$or"))return e;for(var t=[],r=0;r<e.$or.length;r++)t=t.concat(e.$or[r]);return t}function n(e){if("object"!=typeof e)return"string"==typeof e?'"'+e.replace(/\|/g,"%|")+'"':e+"";if(Array.isArray(e)){var t=e.map(n);return t.sort(),"["+t.join(",")+"]"}var r=[],i=Object.keys(e);i.sort();for(var s=0;s<i.length;s++)r.push(n(i[s])+":"+n(e[i[s]]));return"{"+r.join(",")+"}"}function i(e){if(!(e instanceof f.Query))throw new TypeError("Only a Parse Query can be hashed");var t,i=r(e._where||{}),s=[],a=[];if(Array.isArray(i)){var o={};for(t=0;t<i.length;t++){var u={},c=Object.keys(i[t]);c.sort();for(var l=0;l<c.length;l++)u[c[l]]=i[t][c[l]],o[c[l]]=!0;a.push(u)}s=Object.keys(o),s.sort()}else for(s=Object.keys(i),s.sort(),t=0;t<s.length;t++)a.push(i[s[t]]);var d=[s.join(","),n(a),n(e._include||[]),n(e._order||[]),e._limit,e._skip];return e.className+":"+d.join("|")}function s(e){var t=e.indexOf(":"),r=e.substring(0,t),n=e.indexOf("|"),i=e.substring(t+1,n),s=i.split(",");return{className:r,keys:s.length?s:[""]}}function a(e,t){for(var r=!0;r;){var n=e,i=t;if(a=s=void 0,r=!1,!(i instanceof f.Query)){for(var s in i)if(!o(n,s,i[s]))return!1;return!0}var a=n.id instanceof c?n.id.className:n.className;if(a!==i.className)return!1;e=n,t=i._where,r=!0}}function o(e,t,r){var n;if("$or"===t){for(n=0;n<r.length;n++)if(a(e,r[n]))return!0;return!1}if("$relatedTo"===t)return!1;if("object"!=typeof r)return Array.isArray(e[t])?e[t].indexOf(r)>-1:e[t]===r;var i;if(r.__type){if("Pointer"===r.__type){var s=e[t].objectId||e[t].id;return r.className===e[t].className&&r.objectId===s}if(i=f._decode(t,r),Array.isArray(e[t])){for(n=0;n<e[t].length;n++)if(u(e[t][n],i))return!0;return!1}return u(e[t],i)}for(var o in r)switch(i=r[o],i.__type&&(i=f._decode(t,i)),o){case"$lt":if(e[t]>=i)return!1;break;case"$lte":if(e[t]>i)return!1;break;case"$gt":if(e[t]<=i)return!1;break;case"$gte":if(e[t]<i)return!1;break;case"$ne":if(u(e[t],i))return!1;break;case"$in":if(i.indexOf(e[t])<0)return!1;break;case"$nin":if(i.indexOf(e[t])>-1)return!1;break;case"$all":for(n=0;n<i.length;n++)if(e[t].indexOf(i[n])<0)return!1;break;case"$exists":if("undefined"==typeof e[t])return!1;break;case"$regex":if("object"==typeof i)return i.test(e[t]);for(var c="",l=-2,d=i.indexOf("\\Q");d>-1;)c+=i.substring(l+2,d),l=i.indexOf("\\E",d),l>-1&&(c+=i.substring(d+2,l).replace(/\\\\\\\\E/g,"\\E").replace(/\W/g,"\\$&")),d=i.indexOf("\\Q",l);c+=i.substring(Math.max(d,l+2));var h=new RegExp(c,r.$options||"");if(!h.test(e[t]))return!1;break;case"$options":break;case"$select":return!1;case"$dontSelect":return!1;default:return!1}return!0}var u=e("./equalObjects"),c=e("./Id"),f=e("./StubParse");t.exports={queryHash:i,keysFromHash:s,matchesQuery:a}},{"./Id":4,"./StubParse":12,"./equalObjects":16}],12:[function(e,t){"use strict";if("undefined"==typeof Parse){if("function"!=typeof e)throw new Error("Cannot initialize Parse + React: Parse is not defined.");try{t.exports=e("parse").Parse}catch(r){throw new Error("Failed to require Parse module. You need the Parse SDK installed to use Parse + React")}}else t.exports=Parse},{parse:void 0}],13:[function(e,t){(function(r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e){return e.id}function s(e,t,r){for(var n=0;n<e.length;n++){var i=e[n],s=1;if("-"===i[0]&&(i=i.substring(1),s=-1),t[i]<r[i])return-1*s;if(t[i]>r[i])return s}return 0}var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=e("./Id"),u=e("./ObjectStore"),c=function(){function e(t){n(this,e),this.originalQuery=t,this.pending=!1,this.subscribers={},this.resultSet=[],this.observationCount=0,this.issueQuery()}return a(e,[{key:"addSubscriber",value:function(e){var t="o"+this.observationCount++;this.subscribers[t]=e;var r=this.resultSet;return!r[0]||r[0]instanceof o||(r=r.map(i)),e.onNext(r.length?u.getDataForIds(r):[]),t}},{key:"removeSubscriber",value:function(e){return delete this.subscribers[e],Object.keys(this.subscribers).length}},{key:"issueQuery",value:function(){var e=this;this.pending=!0,this.originalQuery.find().then(function(t){e.pending=!1,e.resultSet=u.storeQueryResults(t,e.originalQuery),e.pushData()},function(t){e.pending=!1,e.pushData({error:t})})}},{key:"addResult",value:function(e,t){if(this.originalQuery._order){if(this.originalQuery._skip)return;for(var r=0,n=this.originalQuery._order;r<this.resultSet.length;){var i=s(n,e,this.resultSet[r].ordering);if(!(i>0))break;r++}for(var a={},o=0;o<n.length;o++){var u=n[o];"-"===u[0]&&(u=u.substring(1)),a[u]=e[u]}this.resultSet.splice(r,0,{id:e.id,ordering:a})}else this.resultSet.push(e.id);t||this.pushData()}},{key:"removeResult",value:function(e,t){for(var r=e.toString(),n=0;n<this.resultSet.length;n++){var i=this.resultSet[n];if(i instanceof o||(i=i.id),i.toString()===r)return this.resultSet.splice(n,1),void(t||this.pushData())}}},{key:"pushData",value:function(e){var t=e||[],r=this.resultSet;if(this.originalQuery._limit>-1&&(r=r.slice(0,this.originalQuery._limit)),!r[0]||r[0]instanceof o||(r=r.map(i)),"undefined"==typeof e){var n=r;!n[0]||n[0]instanceof o||(n=n.map(i)),t=u.getDataForIds(n)}for(var s in this.subscribers){var a=this.subscribers[s];Array.isArray(t)?a.onNext(t):t.error&&a.onError&&a.onError(t.error)}}}]),e}();t.exports=c}).call(this,e("_process"))},{"./Id":4,"./ObjectStore":9,_process:2}],14:[function(e,t){(function(r){"use strict";function n(e,t){var r=f(e),n=d[r];n||(n=new l(e),d[r]=n,a(e,r));var s=n.addSubscriber(t);return{refresh:function(){n.pending||n.issueQuery()},pending:function(){return n.pending},dispose:function(){i(n,r,s)}}}function i(e,t,r){if(e.removeSubscriber(r)<1){delete d[t];var n=c(t),i=h[n.className];if(!i)return;for(var s=0;s<n.keys.length;s++)delete i[n.keys[s]][t]}}function s(e){return d[e]||null}function a(e,t){var r=c(t).keys;r.length<1&&(r=[""]);var n=h[e.className];n||(n=h[e.className]={});for(var i=0;i<r.length;i++)n[r[i]]||(n[r[i]]={}),n[r[i]][t]=!0}function o(e,t){var r=h[e];if(!r)return[];var n={};t=t.concat("");for(var i=0;i<t.length;i++)if(r[t[i]])for(var s in r[t[i]])n[s]=!0;return Object.keys(n)}var u=e("./QueryTools"),c=u.keysFromHash,f=u.queryHash,l=e("./Subscription"),d={},h={},b={subscribeToQuery:n,getSubscription:s,queriesForFields:o};t.exports=b}).call(this,e("_process"))},{"./QueryTools":11,"./Subscription":13,_process:2}],15:[function(e,t,r){"use strict";function n(e,t){var r,n=e.target instanceof a?e.target:new a(e.target,"local-"+h++);if(!t.waitForServer){var o,l,b=[];"CREATE"===e.action?(r=c.stackMutation(n,e),l=c.getLatest(n),o={id:n,latest:l,fields:Object.keys(l)}):(r=c.stackMutation(n,e),b=c.fetchSubscribers(n),"DESTROY"===e.action?o={id:n,latest:null,fields:[]}:(l=c.getLatest(n),o={id:n,latest:l,fields:Object.keys(l)})),i(b,o)}var p=new f.Promise;return u.execute(e.action,e.target,e.data).then(function(s){var a,o,u=e.generateDelta(s);t.waitForServer?(o=c.fetchSubscribers(n),a=c.commitDelta(u),p.resolve(i(o,a))):(o=c.fetchSubscribers(n),a=c.resolveMutation(n,r,u),p.resolve(i(o,a)))},function(a){if(!t.waitForServer){var o;if("CREATE"===e.action){o=c.fetchSubscribers(n);for(var u=0;u<o.length;u++){var f=d.getSubscription(o[u]);f.removeResult(n)}c.destroyMutationStack(n)}else{var l=new s(n,{});o=c.fetchSubscribers(n);var h=c.resolveMutation(n,r,l);i(o,h)}}p.reject(a)}),p}function i(e,t){var r,n;if(null===t.latest){for(r=0;r<e.length;r++){if(n=d.getSubscription(e[r]),!n)throw new Error("Object is attached to a nonexistant subscription");n.removeResult(t.id)}return null}var i={};for(r=0;r<e.length;r++)i[e[r]]=!0,n=d.getSubscription(e[r]),l.matchesQuery(t.latest,n.originalQuery)?t.id.toString()!==t.latest.id.toString()?(n.removeResult(t.id,!0),c.removeSubscriber(t.id,e[r]),n.addResult(t.latest),c.addSubscriber(t.latest.id,e[r])):n.pushData():(n.removeResult(t.id),c.removeSubscriber(t.id,e[r]));var s=d.queriesForFields(t.latest.id.className,t.fields);for(r=0;r<s.length;r++)i[s[r]]||(n=d.getSubscription(s[r]),l.matchesQuery(t.latest,n.originalQuery)&&(n.addResult(t.latest),c.addSubscriber(t.latest.id,s[r])));if("_User"===t.latest.id.className){var a=f.User.current();a&&t.latest.id.objectId===a.id&&o.currentUser.update(t.latest)}return t.latest}Object.defineProperty(r,"__esModule",{value:!0}),r.issueMutation=n;var s=e("./Delta"),a=e("./Id"),o=e("./LocalSubscriptions"),u=e("./MutationExecutor"),c=e("./ObjectStore"),f=e("./StubParse"),l=e("./QueryTools"),d=e("./SubscriptionManager"),h=0;t.exports={issueMutation:n}},{"./Delta":3,"./Id":4,"./LocalSubscriptions":5,"./MutationExecutor":8,"./ObjectStore":9,"./QueryTools":11,"./StubParse":12,"./SubscriptionManager":14}],16:[function(e,t){"use strict";function r(e,t){if(typeof e!=typeof t)return!1;if("object"!=typeof e)return e===t;if(e===t)return!0;if("[object Date]"===n.call(e))return"[object Date]"===n.call(t)?+e===+t:!1;if(Array.isArray(e)){if(Array.isArray(t)){if(e.length!==t.length)return!1;for(var i=0;i<e.length;i++)if(!r(e[i],t[i]))return!1;return!0}return!1}if(Object.keys(e).length!==Object.keys(t).length)return!1;for(var s in e)if(!r(e[s],t[s]))return!1;return!0}var n=Object.prototype.toString;t.exports=r},{}],17:[function(e,t){"use strict";function r(e){return e instanceof s.Object?{__type:"Pointer",className:e.className,objectId:e.id}:n(e)}function n(e){if(Array.isArray(e))return e.map(r);if(!(e instanceof s.Object))return a("Attempted to flatten something that is not a Parse Object"),e;var t={id:new i(e.className,e.id),className:e.className,objectId:e.id};e.createdAt&&(t.createdAt=e.createdAt),e.updatedAt&&(t.updatedAt=e.updatedAt);for(var n in e.attributes){var o=e.attributes[n];t[n]=o instanceof s.Object?r(o):Array.isArray(o)?o.map(r):o}return t}var i=e("./Id"),s=e("./StubParse"),a=e("./warning");t.exports=n},{"./Id":4,"./StubParse":12,"./warning":18}],18:[function(e,t){"use strict";try{t.exports=function(){}}catch(r){t.exports=function(){}}},{}]},{},[1])(1)});